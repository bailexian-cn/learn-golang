# 介绍

函数值表示可以将一个函数当作参数、返回值。

# 函数值的局部变量

看一个编程经常犯错的代码块

```go
var rmdirs []func()
for _, dir := range tempDirs() {
	os.MkdirAll(dir, 0755)
	rmdirs = append(rmdirs, func() {
		os.RemoveAll(dir) // NOTE: incorrect!
	})
}
// ...do some work…
for _, rmdir := range rmdirs {
	rmdir() // clean up
}
```

append rmdirs时，使用的目录是dir，这个变量是匿名函数外的变量，遍历tempDirs()时会修改dir的值。最后遍历执行rmdirs中方法时，dir的值都是tempDirs()中的最后一个值。

正确的写法是

```go
for _, dir := range tempDirs() {
    d := dir
    os.MkdirAll(dir, 0755)
	rmdirs = append(rmdirs, func() {
		os.RemoveAll(d) // NOTE: incorrect!
	})
}
```

